# 按计划扩展资源<a name="ZH-CN_TOPIC_0042018378"></a>

弹性伸缩进行伸缩活动时，应对需求有规律变化的场景，需按照规律定期或者周期性的进行伸缩活动，来调整资源。例如，假如有一个Web应用程序，该应用程序支持学生选择选修课程，会在每学期开始和结束时段，该应用程序的使用率显著提高，但在每学期中期该应用程序使用率较低。可根据Web应用程序的可预测流量模式来计划扩展资源。

按照可预测的负载变化来扩展应用程序，通过配置定时策略和周期策略实现扩展资源。

## 如何按计划扩展资源<a name="section28492877113953"></a>

1.  登录管理控制台。
2.  选择“计算 \> 弹性伸缩 \> 伸缩实例”。
3.  在伸缩组所在行的“操作”列下，单击“查看伸缩策略”。
4.  在“伸缩策略”页签，单击“添加”。
5.  根据界面进行配置参数，定时策略可参见[表1](#table442371481205)进行参数配置。

    **表 1**  配置参数

    <a name="table442371481205"></a>
    <table><thead align="left"><tr id="row577295371205"><th class="cellrowborder" valign="top" width="23%" id="mcps1.2.4.1.1"><p id="p75748481205"><a name="p75748481205"></a><a name="p75748481205"></a>参数名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="44%" id="mcps1.2.4.1.2"><p id="p95829881205"><a name="p95829881205"></a><a name="p95829881205"></a>参数说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="33%" id="mcps1.2.4.1.3"><p id="p380245311205"><a name="p380245311205"></a><a name="p380245311205"></a>取值样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row66764651205"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p39228151205"><a name="p39228151205"></a><a name="p39228151205"></a>策略名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p493125731205"><a name="p493125731205"></a><a name="p493125731205"></a>创建伸缩策略的名称。</p>
    </td>
    <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p348954431205"><a name="p348954431205"></a><a name="p348954431205"></a>as-policy-p6g5</p>
    </td>
    </tr>
    <tr id="row456235351205"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p45188451205"><a name="p45188451205"></a><a name="p45188451205"></a>策略类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p28700433104726"><a name="p28700433104726"></a><a name="p28700433104726"></a>计划扩展资源的策略类型可选择定时策略和周期策略，在指定的时间段进行扩展资源。</p>
    <p id="p43666380115020"><a name="p43666380115020"></a><a name="p43666380115020"></a>若选择周期策略除了配置表格中的参数还需配置以下两个参数：</p>
    <a name="ul54876080115118"></a><a name="ul54876080115118"></a><ul id="ul54876080115118"><li>生效时间<p id="p417886214753"><a name="p417886214753"></a><a name="p417886214753"></a>选择伸缩策略触发的时间段。</p>
    </li><li>重复周期<a name="ul5794335214657"></a><a name="ul5794335214657"></a><ul id="ul5794335214657"><li>按天</li><li>按周</li><li>按月</li></ul>
    </li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p531365191205"><a name="p531365191205"></a><a name="p531365191205"></a>-</p>
    </td>
    </tr>
    <tr id="row84666261205"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p147080751205"><a name="p147080751205"></a><a name="p147080751205"></a>触发时间</p>
    </td>
    <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p505033881205"><a name="p505033881205"></a><a name="p505033881205"></a>设定伸缩策略触发时间。</p>
    </td>
    <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p642426221205"><a name="p642426221205"></a><a name="p642426221205"></a>-</p>
    </td>
    </tr>
    <tr id="row413126881205"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p579934701205"><a name="p579934701205"></a><a name="p579934701205"></a>执行动作</p>
    </td>
    <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p59032121112324"><a name="p59032121112324"></a><a name="p59032121112324"></a>设置伸缩活动执行动作及实例的个数。</p>
    <div class="p" id="p61527048112324"><a name="p61527048112324"></a><a name="p61527048112324"></a>执行动作包括：<a name="ul16872520112324"></a><a name="ul16872520112324"></a><ul id="ul16872520112324"><li>增加<p id="p24496875112324"><a name="p24496875112324"></a><a name="p24496875112324"></a>当执行伸缩活动时，向伸缩组增加实例。</p>
    </li><li>减少<p id="p38089867112324"><a name="p38089867112324"></a><a name="p38089867112324"></a>当执行伸缩活动时，从伸缩组中减少实例。</p>
    </li><li>设置为<p id="p65380367112324"><a name="p65380367112324"></a><a name="p65380367112324"></a>将伸缩组中的期望实例数设置为固定值。</p>
    </li></ul>
    </div>
    </td>
    <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><a name="ul38301652103420"></a><a name="ul38301652103420"></a><ul id="ul38301652103420"><li>增加1个实例</li><li>增加10%的实例<p id="p36309970101916"><a name="p36309970101916"></a><a name="p36309970101916"></a>增加10%的实例，即增加的实例个数是该伸缩组当前实例个数的10%。若伸缩组当前实例个数与实例百分比的乘积是非整数，则系统会自动按照如下规则进行舍入：</p>
    </li></ul>
    <a name="ul19104610264"></a><a name="ul19104610264"></a><ul id="ul19104610264"><li>大于1的值向下取整。例如，12.7取整为12。</li></ul>
    <a name="ul16952046122612"></a><a name="ul16952046122612"></a><ul id="ul16952046122612"><li>大于0且小于1的值取整为1。例如，0.67取整为1。</li></ul>
    <p id="p121011463261"><a name="p121011463261"></a><a name="p121011463261"></a>例如，某伸缩组当前有10个实例，有一个执行动作为“增加15%的实例”的伸缩策略。当该策略执行时，系统会按照规则将1.5向下取整为1。因此，此次伸缩活动结束后伸缩组的当前实例个数为11。</p>
    </td>
    </tr>
    <tr id="row253348581205"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p388576551205"><a name="p388576551205"></a><a name="p388576551205"></a>冷却时间</p>
    </td>
    <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p21343661141258"><a name="p21343661141258"></a><a name="p21343661141258"></a>冷却时间是指冷却伸缩活动的时间，在每次伸缩活动完成之后，系统开始计算冷却时间。伸缩组在冷却时间内，会拒绝由告警策略触发的伸缩活动，其他类型的伸缩策略（如定时策略和周期策略）触发的伸缩活动不受限制，但会重新开始计算冷却时间，单位为秒。</p>
    <div class="note" id="note57875228141258"><a name="note57875228141258"></a><a name="note57875228141258"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul51115008141258"></a><a name="ul51115008141258"></a><ul id="ul51115008141258"><li>如果伸缩活动是伸缩策略触发的，以伸缩策略的冷却时间为准。</li><li>如果是手工修改期望实例数量或者其他方式引起的伸缩活动，则以伸缩组的冷却时间为准，默认为300秒。</li></ul>
    </div></div>
    </td>
    <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p31638772"><a name="p31638772"></a><a name="p31638772"></a>300秒</p>
    </td>
    </tr>
    </tbody>
    </table>


1.  单击“确定”。

    在“伸缩策略”页签中可查看新创建的伸缩策略，新创建的伸缩策略默认的状态为“已启用”。


